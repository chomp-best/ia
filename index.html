<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estratega IA | Eliseo Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #000; 
            color: #fff;
            -webkit-font-smoothing: antialiased;
        }

        .apple-container {
            max-width: 500px;
            width: 100%;
        }

        .glass-panel {
            background: rgba(28, 28, 30, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 40px;
        }

        .input-dark {
            background: #000;
            border: 1px solid #1c1c1e;
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .input-dark:focus {
            border-color: #0071e3;
            outline: none;
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }

        .btn-ai {
            background: #fff;
            color: #000;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .btn-ai:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #f5f5f7;
        }

        .invoice-box {
            background: rgba(255, 255, 255, 0.02);
            border: 1px dashed rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            font-family: 'JetBrains Mono', monospace;
            padding: 1.5rem;
        }

        .tip-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 1.25rem 1.5rem;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(10px);
            cursor: pointer;
            overflow: hidden;
            max-height: 80px;
        }

        .tip-card.show { opacity: 1; transform: translateY(0); }
        .tip-card.expanded {
            max-height: 700px;
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(0, 113, 227, 0.4);
            padding-bottom: 2rem;
        }

        .tip-card.premium-tip {
            border-color: rgba(168, 85, 247, 0.4);
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.04) 0%, rgba(168, 85, 247, 0.02) 100%);
        }

        .tip-number { font-size: 10px; font-weight: 800; color: #0071e3; text-transform: uppercase; letter-spacing: 0.1em; }
        .premium-tip .tip-number { color: #a855f7; }

        .expand-icon { transition: transform 0.4s ease; font-size: 10px; color: #444; }
        .expanded .expand-icon { transform: rotate(45deg); color: #0071e3; }

        .loader {
            width: 40px; height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #0071e3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        .fade-up { animation: fadeUp 0.8s ease-out forwards; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .scarcity-legend {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 16px;
            text-align: center;
        }

        .thanks-box {
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            padding-top: 2rem;
            text-align: center;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 bg-[#050505]">

    <div class="apple-container fade-up">
        
        <!-- Header -->
        <div class="text-center mb-10">
            <div class="w-14 h-14 bg-white rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-xl">
                <i class="fa-solid fa-wand-magic-sparkles text-black text-2xl"></i>
            </div>
            <h1 class="text-3xl font-bold tracking-tighter mb-2">Estratega IA</h1>
            <p class="text-sm text-gray-500">Arquitectura web para marcas que dominan su mercado.</p>
        </div>

        <div class="glass-panel p-8 md:p-10">
            
            <div id="error-box" class="hidden bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-2xl text-xs mb-6 text-center"></div>

            <!-- Form State -->
            <div id="form-state">
                <div class="space-y-6">
                    <div>
                        <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2">Tu Nombre</label>
                        <input type="text" id="ownerName" 
                            class="input-dark w-full p-4 text-sm placeholder:text-gray-800"
                            placeholder="Ej: Eliseo Rodríguez">
                    </div>
                    
                    <div>
                        <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2">Rubro del Negocio</label>
                        <input type="text" id="businessNiche" 
                            class="input-dark w-full p-4 text-sm placeholder:text-gray-800"
                            placeholder="Ej: Real Estate, Showroom, Gastronomía...">
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2">¿A qué se dedica tu empresa?</label>
                        <textarea id="businessInput" 
                            class="input-dark w-full h-32 p-4 text-sm leading-relaxed resize-none placeholder:text-gray-800"
                            placeholder="Describe qué buscas lograr hoy (min. 20 caracteres)..."></textarea>
                    </div>
                </div>

                <div class="scarcity-legend mt-8">
                    <p class="text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-1">Nota de Cortesía</p>
                    <p class="text-[11px] text-gray-600 leading-relaxed italic">
                        Este diagnóstico utiliza el motor de IA de Eliseo Studio y está limitado a **una única consulta**. Por favor, sea preciso para obtener el máximo valor estratégico.
                    </p>
                </div>
                
                <button onclick="generateStrategy()" id="submitBtn" class="btn-ai w-full py-4 rounded-2xl font-bold text-sm mt-4 transition-all">
                    Diseñar Hoja de Ruta Web
                </button>
            </div>

            <!-- Loading State -->
            <div id="loading-state" class="hidden py-10 text-center">
                <div class="loader mx-auto mb-6"></div>
                <p class="text-sm text-gray-400 font-medium">Analizando el mercado y diseñando la interfaz ideal...</p>
            </div>

            <!-- Result State -->
            <div id="result-state" class="hidden">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-lg font-bold text-white">Estrategia Web</h2>
                    <span class="text-[10px] font-bold text-purple-500 uppercase tracking-widest bg-purple-500/10 px-3 py-1 rounded-full">Visión IA</span>
                </div>
                
                <!-- Tips Container -->
                <div id="tips-container" class="space-y-4 mb-8"></div>

                <!-- Invoice Summary -->
                <div id="invoice-summary" class="invoice-box mb-10">
                    <div class="flex justify-between items-center mb-4 pb-2 border-b border-white/10">
                        <span class="text-[10px] font-bold text-gray-500 uppercase">Resumen del Proyecto</span>
                        <span class="text-[10px] text-gray-500">v1.4</span>
                    </div>
                    <div id="invoice-items" class="space-y-3 text-[11px]"></div>
                </div>

                <!-- Thanks and Actions -->
                <div class="thanks-box space-y-6">
                    <div class="mb-8">
                        <h3 class="text-sm font-bold mb-2 text-white">Gracias por confiar en el sistema.</h3>
                        <p class="text-[11px] text-gray-500 italic leading-relaxed">"La excelencia no es un acto, es un estándar de diseño." — Eliseo Studio</p>
                    </div>

                    <a id="whatsappBtn" href="#" target="_blank" class="bg-[#25d366] text-white w-full py-4 rounded-2xl font-bold text-sm flex items-center justify-center gap-3 shadow-lg shadow-green-500/20 transition-transform active:scale-[0.98]">
                        <i class="fa-brands fa-whatsapp text-lg"></i>
                        Iniciar Proyecto vía WhatsApp
                    </a>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="downloadPDF()" class="bg-white/5 border border-white/10 text-white py-4 rounded-2xl font-bold text-[11px] flex items-center justify-center gap-2 hover:bg-white/10 transition-all">
                            <i class="fa-solid fa-file-pdf text-red-500"></i>
                            PLAN COMPLETO
                        </button>

                        <button onclick="downloadVoucher()" class="bg-blue-600 text-white py-4 rounded-2xl font-bold text-[11px] flex items-center justify-center gap-2 hover:bg-blue-500 transition-all shadow-lg shadow-blue-500/20">
                            <i class="fa-solid fa-address-card"></i>
                            VOUCHER ELITE
                        </button>
                    </div>

                    <p id="limit-reached-msg" class="text-[9px] text-gray-700 uppercase tracking-widest pt-4 font-bold">
                        Consulta única completada. Contactar por WhatsApp para un análisis profundo.
                    </p>
                </div>
            </div>

        </div>

        <div class="mt-12 text-center">
            <a href="https://chomp-best.github.io/proyectos/" class="text-[10px] font-bold text-gray-700 uppercase tracking-widest hover:text-gray-400 transition-colors" target="_parent">
                <i class="fa-solid fa-chevron-left mr-2"></i> Regresar a Proyectos
            </a>
        </div>
    </div>

    <script>
        const apiKey = "AIzaSyDDllTz55AUk2KYLHAnuB5Nkwt1QEyr0zY"; 
        const model = "gemini-2.5-flash-preview-09-2025";
        const whatsappNumber = "543795041420";
        
        const STORAGE_KEY = 'eliseo_studio_last_strategy';
        const COUNTER_KEY = 'eliseo_studio_query_count';
        const MAX_QUERIES = 1; 
        
        let lastAnalysis = null;

        window.onload = () => {
            checkUsageLimit();
            const savedData = localStorage.getItem(STORAGE_KEY);
            if (savedData) {
                try {
                    lastAnalysis = JSON.parse(savedData);
                    renderResults(lastAnalysis);
                } catch (e) {
                    localStorage.removeItem(STORAGE_KEY);
                }
            }
        };

        function checkUsageLimit() {
            const count = parseInt(localStorage.getItem(COUNTER_KEY) || "0");
            const submitBtn = document.getElementById('submitBtn');
            const usageWarning = document.getElementById('usage-warning');

            if (count >= MAX_QUERIES) {
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.textContent = "Consulta Completada";
                    if (usageWarning) usageWarning.classList.remove('hidden');
                }
            }
        }

        async function generateStrategy() {
            const count = parseInt(localStorage.getItem(COUNTER_KEY) || "0");
            if (count >= MAX_QUERIES) return;

            const name = document.getElementById('ownerName').value.trim();
            const niche = document.getElementById('businessNiche').value.trim();
            const desc = document.getElementById('businessInput').value.trim();

            if (!name || !niche || desc.length < 20) {
                const errBox = document.getElementById('error-box');
                errBox.textContent = "Por favor, aporta más detalles sobre tu empresa.";
                errBox.classList.remove('hidden');
                return;
            }

            const formState = document.getElementById('form-state');
            const loadingState = document.getElementById('loading-state');

            formState.classList.add('hidden');
            loadingState.classList.remove('hidden');

            const systemPrompt = `Eres el estratega senior de Eliseo Studio. Analiza el negocio y diseña 3 pilares tácticos web exclusivos. 
            Responde estrictamente en JSON: 
            {
              "tips": [
                {"title": "Arquitectura de Interfaz", "desc": "...", "benefit": "...", "time": "2-3 días"},
                {"title": "Motor de Conversión", "desc": "...", "benefit": "...", "time": "2-3 días"},
                {"title": "Sello Eliseo Studio", "desc": "...", "benefit": "Diseño Premium Apple-Style", "time": "1 día"}
              ]
            }`;

            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Cliente: ${name}, Rubro: ${niche}, Negocio: ${desc}` }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                        generationConfig: { responseMimeType: "application/json" }
                    })
                });

                const data = await response.json();
                const rawText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                const jsonResponse = JSON.parse(rawText);
                
                const serial = "ES-" + Math.floor(Math.random() * 900000 + 100000);
                const date = new Date().toLocaleDateString('es-AR');

                lastAnalysis = { ...jsonResponse, name, niche, desc, serial, date };
                
                localStorage.setItem(STORAGE_KEY, JSON.stringify(lastAnalysis));
                localStorage.setItem(COUNTER_KEY, (count + 1).toString());

                loadingState.classList.add('hidden');
                renderResults(lastAnalysis);

            } catch (error) {
                loadingState.classList.add('hidden');
                formState.classList.remove('hidden');
                const errBox = document.getElementById('error-box');
                errBox.textContent = "Error de conexión. Por favor reintenta.";
                errBox.classList.remove('hidden');
            }
        }

        function renderResults(data) {
            const formState = document.getElementById('form-state');
            const resultState = document.getElementById('result-state');
            const tipsContainer = document.getElementById('tips-container');
            const invoiceItems = document.getElementById('invoice-items');
            const whatsappBtn = document.getElementById('whatsappBtn');

            formState.classList.add('hidden');
            resultState.classList.remove('hidden');
            
            tipsContainer.innerHTML = '';
            invoiceItems.innerHTML = '';

            const originalIcons = ['fa-layer-group', 'fa-gears', 'fa-crown'];

            data.tips.forEach((tip, index) => {
                const isLast = index === 2;
                const card = document.createElement('div');
                card.className = `tip-card ${isLast ? 'premium-tip' : ''}`;
                
                card.innerHTML = `
                    <div class="tip-header flex justify-between items-start">
                        <div class="flex-grow">
                            <span class="tip-number">${isLast ? 'Sello Eliseo Studio' : `Estrategia 0${index + 1}`}</span>
                            <h3 class="font-bold text-white tracking-tight">${tip.title}</h3>
                        </div>
                        <div class="flex flex-col items-end gap-2">
                            <i class="fa-solid ${originalIcons[index]} ${isLast ? 'text-purple-500' : 'text-gray-600'} text-sm opacity-60"></i>
                            <i class="fa-solid fa-plus expand-icon"></i>
                        </div>
                    </div>
                    <div class="tip-content space-y-4 pt-4">
                        <p class="text-xs text-gray-300 leading-relaxed">${tip.desc}</p>
                        <div class="grid grid-cols-1 gap-2 pt-2 border-t border-white/5">
                             <p class="text-[10px] text-green-500 italic"><span class="font-bold uppercase tracking-widest text-[8px] mr-2">Beneficio:</span> ${tip.benefit}</p>
                             <p class="text-[10px] text-blue-400"><span class="font-bold uppercase tracking-widest text-[8px] mr-2">Tiempo:</span> ${tip.time}</p>
                        </div>
                    </div>
                `;
                card.onclick = () => card.classList.toggle('expanded');
                tipsContainer.appendChild(card);
                setTimeout(() => card.classList.add('show'), 50);

                const item = document.createElement('div');
                item.className = 'flex justify-between items-center opacity-80';
                item.innerHTML = `<span>${tip.title.toUpperCase()}</span><span class="text-gray-600">[OK]</span>`;
                invoiceItems.appendChild(item);
            });

            let waText = `Hola Eliseo! Soy *${data.name}*. Acabo de generar mi Hoja de Ruta IA para mi negocio de *${data.niche}* y quiero iniciar el proyecto de inmediato. ID: ${data.serial}`;
            whatsappBtn.href = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(waText)}`;
            checkUsageLimit();
        }

        function downloadPDF() {
            if (!lastAnalysis) return;
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const { name, niche, tips, desc, serial, date } = lastAnalysis;

            // --- HEADER ---
            doc.setFillColor(0, 0, 0);
            doc.rect(0, 0, 210, 45, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "bold");
            doc.setFontSize(24);
            doc.text("ELISEO STUDIO", 20, 28);
            doc.setFontSize(9);
            doc.setFont("helvetica", "normal");
            doc.text("CONSULTORÍA DIGITAL ESTRATÉGICA", 20, 36);
            doc.text(`BRIEF DE PROYECTO WEB #${serial}`, 135, 28);

            // --- CLIENT INFO ---
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.setFont("helvetica", "bold");
            doc.text(`CLIENTE: ${name.toUpperCase()}`, 20, 60);
            doc.text(`RUBRO: ${niche.toUpperCase()}`, 20, 67);
            doc.setFont("helvetica", "normal");
            doc.setFontSize(8);
            doc.text(`FECHA DE EMISIÓN: ${date}`, 155, 60);

            // --- CONTEXT ---
            doc.setFontSize(10);
            doc.setFont("helvetica", "bold");
            doc.text("CONTEXTO DEL NEGOCIO:", 20, 80);
            doc.setFont("helvetica", "normal");
            doc.setFontSize(9);
            const descLines = doc.splitTextToSize(desc, 170);
            doc.text(descLines, 20, 86);

            let currentY = 86 + (descLines.length * 5) + 10;
            doc.setDrawColor(240);
            doc.line(20, currentY, 190, currentY);
            currentY += 15;

            // --- PILARES TÁCTICOS ---
            doc.setFontSize(14);
            doc.setFont("helvetica", "bold");
            doc.text("PLAN DE DESARROLLO Y BENEFICIOS", 20, currentY);
            currentY += 12;

            tips.forEach((tip, i) => {
                const tipLines = doc.splitTextToSize(tip.desc, 160);
                const benefitLines = doc.splitTextToSize(tip.benefit || "", 135);
                let boxHeight = 25 + (tipLines.length * 5) + (benefitLines.length * 5) + 15;
                
                if (currentY + boxHeight > 260) { doc.addPage(); currentY = 20; }

                doc.setFillColor(252, 252, 254);
                doc.rect(20, currentY, 170, boxHeight, 'F');
                
                doc.setFontSize(10);
                doc.setTextColor(0, 113, 227);
                doc.setFont("helvetica", "bold");
                doc.text(`0${i+1} | ${tip.title.toUpperCase()}`, 25, currentY + 10);
                
                doc.setTextColor(80, 80, 80);
                doc.setFontSize(9);
                doc.setFont("helvetica", "normal");
                doc.text(tipLines, 25, currentY + 17);
                
                let textY = currentY + 17 + (tipLines.length * 5) + 5;
                doc.setTextColor(34, 197, 94);
                doc.setFont("helvetica", "bold");
                doc.text("BENEFICIO:", 25, textY);
                doc.setTextColor(60);
                doc.setFont("helvetica", "italic");
                doc.text(benefitLines, 50, textY);
                
                textY += (benefitLines.length * 5) + 2;
                doc.setTextColor(0, 113, 227);
                doc.setFont("helvetica", "bold");
                doc.text("TIEMPO DESARROLLO:", 25, textY);
                doc.setTextColor(60);
                doc.setFont("helvetica", "normal");
                doc.text(tip.time, 72, textY);

                currentY += boxHeight + 10;
            });

            // --- PROTOCOLO DE INICIO (ORIGINAL INFO) ---
            if (currentY > 200) { doc.addPage(); currentY = 20; } else { currentY += 10; }
            
            doc.setDrawColor(0);
            doc.setLineWidth(0.5);
            doc.line(20, currentY, 190, currentY);
            currentY += 12;
            
            doc.setFontSize(14);
            doc.setFont("helvetica", "bold");
            doc.setTextColor(0);
            doc.text("PROTOCOLO DE INICIO INMEDIATO", 20, currentY);
            currentY += 10;
            
            doc.setFontSize(9);
            const pasos = [
                {p: "PASO 1: RESERVA DE AGENDA", d: "Confirmación de pago inicial para bloquear tu lugar en el ciclo actual."},
                {p: "PASO 2: BRIEFING TÁCTICO", d: "Entrega de accesos y definición visual basada en tu marca."},
                {p: "PASO 3: EJECUCIÓN (7 DÍAS)", d: "Desarrollo integral de la arquitectura propuesta bajo sello Eliseo Studio."},
                {p: "PASO 4: LANZAMIENTO", d: "Entrega final, capacitación y puesta en marcha del motor de ventas."}
            ];
            
            pasos.forEach((paso) => {
                doc.setTextColor(0, 113, 227);
                doc.setFont("helvetica", "bold");
                doc.text(paso.p, 25, currentY);
                doc.setTextColor(80);
                doc.setFont("helvetica", "normal");
                doc.text(paso.d, 75, currentY);
                currentY += 8;
            });

            currentY += 15;

            // --- MENSAJE INTROSPECTIVO (ORIGINAL INFO) ---
            doc.setDrawColor(168, 85, 247);
            doc.setLineWidth(0.5);
            doc.line(20, currentY, 40, currentY);
            currentY += 10;
            doc.setFont("helvetica", "italic");
            doc.setFontSize(9);
            doc.setTextColor(130);
            const introspectiveMsg = "Este análisis no es solo el resultado de algoritmos procesando datos; es el reflejo de una visión que busca trascender lo convencional. En Eliseo Studio, creemos que el diseño premium y la tecnología no son fines, sino el lenguaje con el que construimos el futuro de tu negocio. Lo que hoy es una hoja de ruta, mañana puede ser el estándar de tu industria.";
            const introLines = doc.splitTextToSize(introspectiveMsg, 170);
            doc.text(introLines, 20, currentY);
            currentY += (introLines.length * 4) + 10;
            doc.setFont("helvetica", "bold");
            doc.setTextColor(168, 85, 247);
            doc.text("CON GRATITUD, ELISEO.", 20, currentY);

            // --- CONTACT BLOCK ---
            currentY += 10;
            if (currentY > 250) { doc.addPage(); currentY = 20; }
            doc.setFillColor(0, 0, 0);
            doc.rect(20, currentY, 170, 25, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "bold");
            doc.text("INICIAR IMPLEMENTACIÓN AHORA:", 30, currentY + 10);
            doc.setFontSize(11);
            doc.text(`WhatsApp: +${whatsappNumber}`, 30, currentY + 18);

            doc.save(`Auditoria_Web_EliseoStudio_${name.replace(/\s+/g, '_')}.pdf`);
        }

        function downloadVoucher() {
            if (!lastAnalysis) return;
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: [148, 105] });
            
            // Black Background
            doc.setFillColor(8, 8, 8);
            doc.rect(0, 0, 148, 105, 'F');

            // Logo Box
            doc.setFillColor(255, 255, 255);
            doc.rect(12, 12, 10, 10, 'F');
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(9);
            doc.setFont("helvetica", "bold");
            doc.text("e.", 15, 19);

            // Studio Identity
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(8);
            doc.setFont("helvetica", "bold");
            doc.text("ELISEO STUDIO", 26, 16.5);
            doc.setFontSize(6);
            doc.setTextColor(100);
            doc.text("STRATEGY • DESIGN • AI", 26, 20);

            // ID and Date
            doc.setFontSize(7);
            doc.setTextColor(150);
            doc.text(`ID: ${lastAnalysis.serial}`, 115, 17);
            doc.text(`DATE: ${lastAnalysis.date}`, 115, 21);

            doc.setDrawColor(255, 255, 255, 0.05);
            doc.line(12, 30, 136, 30);

            // User Info
            doc.setFontSize(7);
            doc.setTextColor(80);
            doc.text("SOCIO ESTRATÉGICO ACREDITADO", 12, 40);

            doc.setFontSize(18);
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "bold");
            doc.text(lastAnalysis.name.toUpperCase(), 12, 52);

            doc.setFontSize(8);
            doc.setTextColor(0, 113, 227);
            doc.text(`RUBRO: ${lastAnalysis.niche.toUpperCase()}`, 12, 60);

            doc.setTextColor(100);
            doc.setFontSize(7);
            doc.setFont("helvetica", "normal");
            const detailsText = `RESUMEN DE VISIÓN: ${lastAnalysis.desc}`;
            const detailLines = doc.splitTextToSize(detailsText, 120);
            doc.text(detailLines, 12, 68);

            // Phrase
            doc.setFontSize(9);
            doc.setTextColor(200);
            doc.setFont("helvetica", "italic");
            doc.text('"El futuro pertenece a quienes diseñan su propio estándar."', 12, 88);

            doc.setFontSize(5);
            doc.setTextColor(30);
            doc.setFont("helvetica", "bold");
            doc.text("OFFICIAL ACCESS • ELISEO STUDIO • PREMIUM INFRASTRUCTURE • 2025", 12, 98);

            doc.save(`Voucher_Elite_${lastAnalysis.name.replace(/\s+/g, '_')}.pdf`);
        }
    </script>
</body>
</html>
